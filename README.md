# 辽宁省智慧旅游路径优化系统

## 项目概述

辽宁省智慧旅游路径优化系统是一个基于Python开发的旅游路径规划系统，主要功能包括：

- 生成闭环旅行路径（起点和终点一致）
- 结合天气、客流量等因素进行路径优化
- 全程使用Python内置库和跨平台库，确保在Windows系统上稳定运行
- 提供直观的地图可视化和用户友好的交互界面

## 核心功能

### 1. 闭环路径生成
- 基于遗传算法生成最优闭环路径
- 支持自定义起点城市、目标城市和旅行天数
- 可根据用户偏好（景点类型、最低评分等）筛选景点

### 2. 天气敏感型路径优化
- 自动获取未来天气预报
- 根据天气情况调整每日行程
- 避免在恶劣天气下安排户外景点

### 3. 客流量预测
- 使用Scikit-learn的随机森林算法预测景点客流量
- 考虑天气、节假日等因素
- 路径优化时避免拥挤景点

### 4. 交互式地图可视化
- 使用Folium生成交互式地图
- 清晰标记每日行程和景点信息
- 支持查看景点详情

### 5. 行程管理
- 支持保存行程到数据库
- 可查看历史行程
- 支持删除和重新加载行程

## 技术栈

| 功能模块 | 技术栈 |
|---------|--------|
| 路径优化 | NetworkX + 遗传算法 |
| 客流量预测 | scikit-learn (RandomForestRegressor) |
| 风险评估 | 规则引擎 |
| 地图可视化 | Folium |
| 数据处理 | Pandas/NumPy |
| Web框架 | Flask |
| 数据存储 | MySQL |

## 安装步骤

1. 安装Python 3.8+（推荐3.10）
2. 克隆项目代码
3. 安装依赖：
   ```
   pip install -r requirements.txt
   ```
4. 配置数据库连接（修改`app/config.py`）
5. 初始化数据库：
   ```
   python -c "from app import db; db.create_all()"
   ```
6. 运行应用：
   ```
   python run.py
   ```

## 使用方法

1. 访问 http://127.0.0.1:5000
2. 注册并登录系统
3. 进入路径优化页面
4. 设置起点城市、目标城市和旅行天数
5. 选择景点类型偏好和最低评分
6. 点击"生成闭环路径"按钮
7. 查看生成的路径和地图
8. 可以根据天气情况调整行程
9. 保存行程到数据库

## 项目结构

```
├── app/                          # 主应用目录
│   ├── services/                # 核心服务层
│   │   ├── path_optimization_service.py   # 路径优化服务
│   │   ├── traffic_prediction_service.py  # 客流量预测服务
│   │   ├── risk_assessment_service.py    # 风险评估服务
│   │   ├── weather_service.py            # 天气数据服务
│   │   ├── recommendation_service.py      # 景点推荐服务
│   │   └── map_service.py                # 地图可视化服务
│   ├── routes/                    # 路由层
│   ├── models.py                  # 数据模型
│   ├── utils/                     # 工具函数
│   └── static/                    # 静态资源
├── data/                          # 数据目录
├── scripts/                       # 脚本文件
└── run.py                         # 应用入口
```

## 系统架构

系统采用分层架构设计：

1. **表示层**：Flask Web框架提供的HTTP接口和HTML页面
2. **业务逻辑层**：各服务类实现的核心功能
3. **数据访问层**：SQLAlchemy ORM操作数据库
4. **数据层**：MySQL数据库存储景点、用户和行程数据

## 开发指南

### 代码规范
- 使用PEP 8编码规范
- 为所有函数和类添加详细的文档字符串
- 遵循面向对象设计原则

### 测试
- 使用pytest进行单元测试和集成测试
- 测试文件放在`app/tests/`目录下
- 运行测试：`python -m pytest app/tests/ -v`

### 部署
- 开发环境：直接运行`python run.py`
- 生产环境：建议使用Gunicorn或uWSGI作为WSGI服务器

## 未来扩展方向

1. **实时数据集成**
   - 接入实时天气API
   - 接入实时客流量数据

2. **移动端支持**
   - 开发微信小程序
   - 支持移动端地图导航

3. **个性化推荐增强**
   - 基于用户历史行为推荐
   - 结合社交媒体数据优化推荐

4. **多模式交通支持**
   - 支持自驾、公共交通等多种交通方式
   - 提供交通时间和费用估算

5. **景区联动功能**
   - 与景区实时对接，提供预约服务
   - 支持在线购票和核销

## 贡献指南

欢迎对本项目进行贡献！贡献方式包括：

1. 提交Issue报告bug或提出新功能建议
2. 提交Pull Request修复bug或添加新功能
3. 完善文档
4. 参与测试

## 许可证

本项目采用MIT许可证。

## 联系方式

如有问题或建议，请通过以下方式联系：

- 邮箱：[your-email@example.com]
- GitHub：[https://github.com/your-username/liaoning-travel-optimizer]
